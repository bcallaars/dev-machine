---

- name: source nvm in ~/.zprofile
  lineinfile: >
    dest=~/.zprofile
    line="source ~/.nvm/nvm.sh"
    create=yes
  tags: nvm

- name: Install {{ node_version }}
  command: bash -c 'source ~/.nvm/nvm.sh; {{ item }} '
  with_items:
    - nvm install {{ node_version }}
    - nvm alias default {{ node_version }}
  tags: nvm

- name: Install NPM packages
  npm: name={{ item }} state=present global=yes
  with_items:
    - nodemon
    - standard
    - nodemon
    - typescript
    - tslint
    - source-map-explorer
